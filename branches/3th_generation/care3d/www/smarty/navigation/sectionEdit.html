<script type="text/javascript">
function addFormValue(myElement, form)
{$result->
    var myForm = document.getElementById(form);
    
    newInput = document.createElement("input");
    newInput.setAttribute('name', myElement.name);
    newInput.setAttribute('value', myElement.value);
    newInput.setAttribute('type', 'hidden');
    myForm.appendChild(newInput);  
}
</script>

    <form method="post" name="sectionEdit" id="sectionEdit">
        <input type="hidden" name="action" value="{$result->action}" /> 
        <input type="hidden" name="page[section_id]" value="{$result->section.section_id}" />
        <input type="hidden" name="page[order_id]" value="{$result->section.order_id}" />
        <input type="hidden" name="page[original_parent_id]" value="{$result->section.parent_id}" />
        <input type="hidden" name="page[original_is_enabled]" value="{$result->section.is_enabled}" />

    <h1 class="$result->pageTitle">{$result->translate($result->pageTitle)}</h1>
    {if $result->msgGet()}<span>{$result->msgGet()}</span>{/if}
    <table class="wide">
        <tr>
            <td colspan="2" align="center">{foreach from=$result->error item=string} <strong>{$string}</strong><br />
            {/foreach}</td>
        </tr>
    
        <tr>
            <td colspan="2">
                <p>{$result->translate('intro text 1')}</p>
                <p>{$result->translate('intro text 2')}</p>
                <p>&nbsp;</p>
            </td>
        </tr>
        
        {if $result->section.section_id}
            <tr>
                <th align="left">{$result->translate('Section ID')}</th>
                <td>{$result->section.section_id}</td>
            </tr>
        {/if}

        <tr>
            <th align="left">{$result->translate('Page Title')}</th>
            <td><input type="text" name="page[title]" value="{$result->section.title}" /></td>
        </tr>

        <tr>
            <th align="left">{$result->translate('Parent Page')}:</th>
            <td>
                <select name="page[parent_id]">
                    {$result->sectionNodesOptions}
                </select>
            </td>
        </tr>

        <tr>
            <th align="left">{$result->translate('Page')}:</th>
            
            <td>
                <select name="page[articleType]" multiple 
                    onChange="addFormValue(this, 'sectionEdit'); self.document.sectionEdit.submit()">
                    
                <option value="static" {$result->staticSelected}>
                    {$result->translate('static articles')}
                </option>

                <option value="dynamic" {$result->dynamicSelected}>
                    {$result->translate('dynamic pages')}
                </option>  
                
                <option value="wiki" {$result->wikiSelected}>
                    wiki
                </option>  
                </select>

                {if $result->staticSelected}
                    <select size="1" name="page[staticArticleId]">
                        {$result->generateSelect($result->aStaticArticles,$result->section.resource_uri)}
                    </select>
                {/if}<br />
                {if $result->dynamicSelected}
                    <select size="1" name="page[module]"
                        onChange="addFormValue(this, 'sectionEdit'); self.document.sectionEdit.submit()">
                        {$result->generateSelect($result->aModules,$result->section.module)}
                    </select> module<br />
                    <select size="1" name="page[manager]"
                        onChange="addFormValue(this, 'sectionEdit'); self.document.sectionEdit.submit()">
                        {$result->generateSelect($result->aManagers,$result->section.manager)}
                    </select> manager<br />
                    <select size="1" name="page[actionMapping]">
                        <option value="">none
                        {$result->generateSelect($result->aActions,$result->section.actionMapping)}
                    </select> action                                       
                {/if}
                {if $result->wikiSelected}
                    <input type="text" size="50" name="page[resource_uri]" value="{$result->section.resource_uri}"> wiki page URL
                {/if}               
            </td>
        </tr>

        <tr>
            <th align="left">{$result->translate('Additional params')}:</th>
            <td><input type="text" name="page[add_params]" value="{$result->section.add_params}" /> {$result->translate('separate with slashes (/)')}</td>
        </tr>

        <tr>
            <th align="left">{$result->translate('Anchor')}:</th>
            <td><input type="text" name="page[anchor]" value="{$result->section.anchor}" /> {$result->translate('just the anchor name')}</td>
        </tr>

		 <tr>
            <th align="left">{$result->translate('AccessKey')}:</th>
            <td><input type="text" name="page[acces_key]" value="{$result->section.acces_key}" /> {$result->translate('Any number, which can be pressed with the ALT-key to load the page.')}</td>
        </tr>

        <tr>
            <th align="left">{$result->translate('Rel Marker')}:</th>
            <td><input type="text" name="page[rel]" value="{$result->section.rel}" /> {$result->translate('Additional navigation aids for better accessibility. Use values like "home", "prev" or "next".')}</td>
        </tr>

        <tr>
            <th align="left">{$result->translate('Status')}:</th>
            <td><input type="checkbox" name="page[is_enabled]" {$result->pageIsEnabled} /> {$result->translate('check to activate')}</td>
        </tr>

        <tr>
            <th align="left">{$result->translate('Can view')}:</th>

            <td>
                <select size="5" name="page[perms][]" multiple="multiple">
                    {$result->generateSelect($result->aRoles,$result->aSelectedRoles,1)}
                </select>
            </td>
        </tr>

        <tr>
            <td colspan="2" align="center">
                <input class="wideButton" type="submit" name="submitted" value="{$result->translate('Save')}" />&nbsp; 
                <input class="wideButton" type="button" name="cancel" value="{$result->translate('Cancel')}" 
                    onclick="document.location.href='{$result->makeUrl('list','page','navigation')}'" />
            </td>
        </tr>
    </table>
</form>
