<script type="text/javascript">
    function updateFormInterface()
    {$result->
        f = document.forms['frmSearch'];
        v = f.elements['search[reg_date_mod]'].value == 0 ? true : false;
        f.elements['search[reg_date1][year]'].disabled = v;
        f.elements['search[reg_date1][month]'].disabled = v;
        f.elements['search[reg_date1][day]'].disabled = v;
        v = f.elements['search[reg_date_mod]'].value == 4 ? false : true;
        f.elements['search[reg_date2][year]'].disabled = v;
        f.elements['search[reg_date2][month]'].disabled = v;
        f.elements['search[reg_date2][day]'].disabled = v;
    }
</script>

<form action="" method="post" name="frmSearch" id="frmSearch">
<p><input name="action" type="hidden" value="search" /></p>
<h1 class="$result->pageTitle">{$result->translate($result->pageTitle)}</h1>
{if $result->msgGet()}<span>{$result->msgGet()}</span>{/if}

<table class="narrow">
    <tr><th colspan="2">{$result->translate('Search Criteria')}</th></tr>
    <tr>
        <td class="fieldName" width="50%">{$result->translate('User ID')}</td>
        <td align="left" width="50%">
        {if $result->error.user_id}<div class="error">{$result->error.user_id}</div>{/if}
        <input name="search[user_id]" type="text" value="{$result->search.user_id}" />
        </td>
    </tr>

    <tr>
        <td class="fieldName" width="50%">{$result->translate('Username')}</td>
        <td align="left" width="50%">
        {if $result->error.username}<div class="error">{$result->error.username}</div>{/if}
        <input name="search[username]" type="text" value="{$result->search.username}" />
        </td>
    </tr>

    <tr>
        <td class="fieldName" width="50%">{$result->translate('First Name')}</td>
        <td align="left" width="50%">
        {if $result->error.first_name}<div class="error">{$result->error.first_name}</div>{/if}
        <input name="search[first_name]" type="text" value="{$result->search.first_name}" />
        </td>
    </tr>

    <tr>
        <td class="fieldName" width="50%">{$result->translate('Last Name')}</td>
        <td align="left" width="50%">
        {if $result->error.last_name}<div class="error">{$result->error.last_name}</div>{/if}
        <input name="search[last_name]" type="text" value="{$result->search.last_name}" />
        </td>
    </tr>

    <tr>
        <td class="fieldName" width="50%">{$result->translate('Email')}</td>
        <td align="left" width="50%">
        {if $result->error.email}<div class="error">{$result->error.email}</div>{/if}
        <input name="search[email]" type="text" value="{$result->search.email}" />
        </td>
    </tr>
    
    <tr>
        <td class="fieldName" width="50%">{$result->translate('Role')}</td>
        <td align="left" width="50%">
        {if $result->error.roles}<div class="error">{$result->error.roles}</div>{/if}
        <select name="search[roles]" multiple size="5">
            {$result->generateSelect($result->aRoles,$result->user.role_id)}
        </select>
        </td>
    </tr>
    
    {if $result->orgOptions}
    <tr>
        <td class="fieldName" width="50%">{$result->translate('Organisation')}</td>
        <td align="left" width="50%">
        {if $result->error.orgs}<div class="error">{$result->error.orgs}</div>{/if}
        <select name="search[orgs]" multiple size="5">
            {$result->generateSelect($result->aOrgs,$result->user.organisation_id)}
        </select>
        </td>
    </tr>
    {/if}
    
    <tr>
        <td class="fieldName" width="50%">{$result->translate('Register Date')}</td>
        <td align="left" width="50%">
        {if $result->error.reg_date_mod}<div class="error">{$result->error.reg_date_mod}</div>{/if}
        <select name="search[reg_date_mod]" onchange="javascript:updateFormInterface(); return false;">
            {$result->generateSelect($result->regDateMod,$result->search.reg_date_mod)}
        </select><br/>
        {if $result->error.reg_date1}<div class="error">{$result->error.reg_date1}</div>{/if}
        {$result->regDate1}<br/>
        {if $result->error.reg_date2}<div class="error">{$result->error.reg_date2}</div>{/if}
        {$result->regDate2} 
    </tr>
    
    <!--<tr>
    <td class="fieldName" width="50%">{$result->translate('Perms Are Out of Sync With Role')}</td>
    <td align="left" width="50%">
    {$result->permSync}</td>
    </tr>-->
    
    <tr>
        <td class="fieldName" width="50%">{$result->translate('Status')}</td>
        <td align="left" width="50%">
        {if $result->error.status}<div class="error">{$result->error.status}</div>{/if}
        <select name="search[status]">{$result->generateSelect($result->status,$result->search.status)}</select>
    </tr>
    
    <tr>
        <td valign="top" align="center" colspan="2">
        <input class="wideButton" name="submitted" value="{$result->translate('Search')}" type="submit" />&nbsp; 
        <input class="wideButton" type="button" value="{$result->translate('Cancel')}" onclick="javascript:document.location.href='{$result->makeUrl('','user','user')}'" /> 
        </td>
    </tr>

</table>
</form>
